define("multiSceneMovie/appearanceDetector",["exports"],function(a){"use strict";var b;b=function(){function a(a,b,c){this.element=a,this.topMargin=null!=b?b:90,this.bottomMargin=null!=c?c:90,this.wasVisible=!1,this.detect()}return a.prototype.viewportHeight=function(){return window.innerHeight},a.prototype.viewportTop=function(){return window.scrollY},a.prototype.viewportBottom=function(){return this.viewportTop()+this.viewportHeight()},a.prototype.elementTop=function(){return this.element.getBoundingClientRect().top},a.prototype.elementBottom=function(){return this.elementTop()+this.element.getBoundingClientRect().height},a.prototype.topVisible=function(){return this.elementTop()+this.topMargin>0&&this.elementTop()+this.topMargin<this.viewportBottom()},a.prototype.bottomVisible=function(){return this.elementBottom()-this.bottomMargin>0&&this.elementBottom()-this.bottomMargin<this.viewportBottom()},a.prototype.visible=function(){return this.topVisible()&&this.bottomVisible()},a.prototype.didAppear=function(){},a.prototype.didDisappear=function(){},a.prototype.detect=function(){var a;return a=this.visible(),a?this.wasVisible||this.didAppear():this.wasVisible&&this.didDisappear(),this.wasVisible=a},a}(),a["default"]=b}),define("multiSceneMovie/eventEmitter",["exports"],function(a){"use strict";var b;b=function(){function a(b){if("object"==typeof a.instance)return a.instance;if(!b)throw"please set root element for event emitting";this.element=b,a.instance=this}return a.prototype.emit=function(a,b){var c,d;if("object"==typeof b)return"function"==typeof CustomEvent?this.element.dispatchEvent(new CustomEvent(a,b)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,!1,!1,b.detail),this.element.dispatchEvent(d));try{return this.element.dispatchEvent(new Event(a))}catch(e){return c=e,d=document.createEvent("CustomEvent"),d.initEvent(a,!1,!1),this.element.dispatchEvent(d)}},a.prototype.listen=function(a,b){return this.element.addEventListener(a,b,!1)},a}(),a["default"]=b}),define("multiSceneMovie/frameRectangle",["exports"],function(a){"use strict";var b;b=function(){function a(a,b){this.leftPosition=a,this.topPosition=b}return a.prototype.backgroundPositionText=function(){return""+this.leftPosition+"px "+this.topPosition+"px"},a}(),a["default"]=b}),define("multiSceneMovie/movie",["multiSceneMovie/screen","multiSceneMovie/strip","exports"],function(a,b,c){"use strict";var d,e=a["default"],f=b["default"],g=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a,b,c){this.screen=a,this.strips=b,this.fps=c,this.loadMovie=g(this.loadMovie,this),this.screen.setStrips(this.strips),this._loaded=0,this.currentFrameIndex=0,this.currentTimeCodeInSeconds=0,this.currentTimeCodeInSecondsWas=0,this.strips.forEach(function(a){return function(b){return b.stripImageDidLoad=function(){return a._loaded+=1,a._loaded===a.strips.length?a.movieDidLoad():void 0}}}(this))}return a.prototype.loadMovie=function(){return this.strips.forEach(function(a){return a.loadStripImage()})},a.prototype.moveFrameIndex=function(){return this.currentFrameIndex++,this.currentTimeCodeInSecondsWas=this.currentTimeCodeInSeconds,this.currentTimeCodeInSeconds=Math.floor(this.currentFrameIndex/this.fps),this.currentTimeCodeInSecondsWas!==this.currentTimeCodeInSeconds?this.movieDidPlayedTo(this.currentTimeCodeInSeconds):void 0},a.prototype.play=function(){return this.timerId?void 0:(this.isAtFirstFrame()?this.movieDidStart():this.movieDidResume(),this.timerId=setInterval(function(a){return function(){return a.isAtLastFrame()&&(a.pause(),a.screen.currentStrip().deactivate(),a.screen.currentStipIndex=0,a.screen.currentStrip().activate(),a.movieDidFinish()),a.screen.showCurrentFrame(),a.screen.moveFrameToNext(),a.moveFrameIndex()}}(this),1e3/this.fps))},a.prototype.pause=function(){return this.isAtLastFrame()||this.movieDidPause(),this.timerId&&clearInterval(this.timerId),this.timerId=void 0},a.prototype.rewind=function(){return this.screen.moveFrameToFirst(),this.currentFrameIndex=0,this.currentTimeCodeInSeconds=0,this.currentTimeCodeInSecondsWas=0},a.prototype.isAtFirstFrame=function(){return this.screen.isAtFirstFrame()},a.prototype.isAtLastFrame=function(){return this.screen.isAtLastFrame()},a.prototype.movieDidLoad=function(){},a.prototype.movieDidStart=function(){},a.prototype.movieDidResume=function(){},a.prototype.movieDidPause=function(){},a.prototype.movieDidFinish=function(){},a.prototype.movieDidPlayedTo=function(){},a.createFromHTMLElement=function(b,c){var d,g,h,i,j,k,l,m;for(g=b.dataset,k=parseInt(g.frameWidth,10),d=parseInt(g.frameHeight,10),h=new e(b),h.element.style.width=k,h.element.style.height=d,j=[],l=0,m=c.length;m>l;l++)i=c[l],j.push(new f(i.dataset.url,k,d,parseInt(i.dataset.framesCount,10),i));return new a(h,j,parseInt(g.fps,10))},a}(),c["default"]=d}),define("multiSceneMovie/multiSceneMovie",["multiSceneMovie/movie","multiSceneMovie/stage","multiSceneMovie/scene","multiSceneMovie/eventEmitter","exports"],function(a,b,c,d,e){"use strict";var f,g=a["default"],h=b["default"],i=c["default"],j=d["default"];f=function(){function a(a){this.rootElementId=a,this.createAndComposeScenes()}var b;return a.prototype.startScenes=function(){return this.scenes[0].start()},a.prototype.bindEvent=function(a,b){var c;return c=new j,c.listen(a,b)},a.prototype.triggerEvent=function(a){var b;return b=new j,b.emit(a)},b=function(a,b,c,d,e){var f,g,h;return f=new j,g=b.stage,g.movie=a,a.movieDidLoad=function(){return f.emit("movie:loaded")},a.movieDidStart=function(){return f.emit("movie:started")},a.movieDidPause=function(){return f.emit("movie:paused")},a.movieDidResume=function(){return f.emit("movie:resumed")},a.movieDidFinish=function(){return f.emit("movie:finished")},a.movieDidPlayedTo=function(a){return f.emit("movie:played:"+a)},g.appearanceDetector.didAppear=function(){return f.emit("movie:screen:appeared")},g.appearanceDetector.didDisappear=function(){return f.emit("movie:screen:disappeared")},f.listen("movie:loaded",c.finish),f.listen("movie:finished",b.finish),f.listen("movie:finished",d.start),f.listen("movie:screen:appeared",function(){return g.isOpen()?a.play():void 0}),f.listen("movie:screen:disappeared",function(){return a.pause()}),f.listen("movie:play",function(){return g.isOpen()?a.play():void 0}),f.listen("movie:pause",function(){return a.pause()}),f.listen("movie:resume",function(){return g.isOpen()?a.play():void 0}),c.sceneDidStart=a.loadMovie,c.sceneDidFinish=b.start,b.sceneDidStart=function(){var b;return a.rewind(),("function"==typeof(b=g.detectAppearance()).bind?b.bind(g):void 0)?a.play():void 0},b.sceneDidFinish=e.start,document.addEventListener("scroll","function"==typeof(h=g.detectAppearance).bind?h.bind(g):void 0,!1),d.stage.element.addEventListener("click",function(){return f.emit("movie:replay")},!1),f.listen("movie:replay",function(){return e.stage.close(),d.finish(),b.start(),f.emit("movie:replayed")})},a.prototype.createAndComposeScenes=function(){var a,c,d,e,f,k,l,m,n,o,p,q,r,s;return p=document.getElementById(this.rootElementId),p&&(new j(p),r=p.dataset)?(m=document.getElementById(r.loadingStage),k=document.getElementById(r.finishedStage),a=document.getElementById(r.contentStage),f=document.getElementById(r.movieStage).dataset,q=document.getElementById(f.screen),s=document.getElementById(f.strips).getElementsByClassName(f.stripsClass),e=g.createFromHTMLElement(q,s),d=function(a){return new i(new h(a))},o=d(q),n=d(m),l=d(k),c=d(a),b(e,o,n,l,c),this.scenes=[n,o,l,c]):void 0},a}(),e["default"]=f}),define("multiSceneMovie/scene",["exports"],function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function a(a){this.stage=a,this.finish=c(this.finish,this),this.start=c(this.start,this)}return a.prototype.sceneDidStart=function(){},a.prototype.sceneDidFinish=function(){},a.prototype.start=function(){return this.stage.open(),this.sceneDidStart()},a.prototype.finish=function(){return this.stage.close(),this.sceneDidFinish()},a}(),a["default"]=b}),define("multiSceneMovie/screen",["exports"],function(a){"use strict";var b;b=function(){function a(a){this.element=a,this.element.style.position="relative",this.element.style.overflow="hidden",this.setDefaultImage()}return a.prototype.setStrips=function(a){return this.strips=a,this.currentStipIndex=0,this.currentStrip().activate()},a.prototype.setDefaultImage=function(){var a;return this.defaultImageUrl()?(a=this.element.style.cssText,this.element.style.cssText=a+("background-image: url("+this.defaultImageUrl()+"); background-size: cover;ã€€background-repeat: no-repeat;")):void 0},a.prototype.defaultImageUrl=function(){var a;return a=this.element.dataset.defaultImage,""===a?void 0:a},a.prototype.showCurrentFrame=function(){return this.currentStrip().moveToCurrentFrame()},a.prototype.currentStrip=function(){return this.strips[this.currentStipIndex]},a.prototype.moveFrameToNext=function(){return this.currentStrip().isAtLastFrame()&&this.moveStripToNext(),this.currentStrip().moveFrameToNext()},a.prototype.moveStripToNext=function(){return this.currentStrip().resetFrame(),this.currentStrip().deactivate(),this.currentStrip()!==this.strips[this.strips.length-1]&&this.currentStipIndex++,this.currentStrip().resetFrame(),this.currentStrip().activate()},a.prototype.moveFrameToFirst=function(){return this.currentStipIndex=0,this.currentStrip().frameIndex=0,this.currentStrip().moveToCurrentFrame()},a.prototype.isAtFirstFrame=function(){return this.currentStrip()!==this.strips[0]?!1:0===this.currentStrip().frameIndex?!0:!1},a.prototype.isAtLastFrame=function(){return this.currentStrip()!==this.strips[this.strips.length-1]?!1:this.currentStrip().isAtLastFrame()?!0:!1},a}(),a["default"]=b}),define("multiSceneMovie/stage",["multiSceneMovie/appearanceDetector","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a){this.element=a,this.appearanceDetector=new d(this.element)}return a.prototype.stageDidAppear=function(){},a.prototype.stageDidDisapper=function(){},a.prototype.detectAppearance=function(){return this.appearanceDetector.detect()},a.prototype.open=function(){return this.detectAppearance(),this.element.classList.remove("hide")},a.prototype.close=function(){return this.element.classList.add("hide")},a.prototype.isOpen=function(){return!this.isClose()},a.prototype.isClose=function(){return this.element.classList.contains("hide")},a}(),b["default"]=c}),define("multiSceneMovie/strip",["multiSceneMovie/frameRectangle","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a,b,c,d,e){this.image_uri=a,this.frameWidth=b,this.frameHeight=c,this.framesCount=d,this.element=e,this.initializeStyles(),this.initializeFrames(),this.initializeStripImages()}return a.prototype.initializeStyles=function(){return this.element.style.position="absolute"},a.prototype.initializeFrames=function(){var a,b,c;for(this.frames=[],a=b=0,c=this.framesCount-1;c>=0?c>=b:b>=c;a=c>=0?++b:--b)this.frames.push(new d(0,this.frameHeight*a));return this.frameIndex=0},a.prototype.initializeStripImages=function(){return this.stripImageElement=this.element.getElementsByTagName("img")[0],this.stripImageElement.style.width=""+this.frameWidth+"px",this.stripImageElement.style.height=""+this.frameHeight*this.framesCount+"px"},a.prototype.currentFrame=function(){return this.frames[this.frameIndex]},a.prototype.moveFrameToNext=function(){return this.frameIndex++},a.prototype.isAtLastFrame=function(){return this.frameIndex===this.framesCount-1},a.prototype.stripImageDidLoad=function(){},a.prototype.loadStripImage=function(){return this.stripImageElement.addEventListener("load",this.stripImageDidLoad,!1),this.stripImageElement.src=this.image_uri},a.prototype.activate=function(){return this.element.classList.remove("hide")},a.prototype.deactivate=function(){return this.element.classList.add("hide")},a.prototype.moveToCurrentFrame=function(){return this.element.style.top=""+-1*this.currentFrame().topPosition+"px",this.element.style.left=""+-1*this.currentFrame().leftPosition+"px"},a.prototype.resetFrame=function(){return this.frameIndex=0,this.moveToCurrentFrame()},a}(),b["default"]=c});