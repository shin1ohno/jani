define("multiSceneMovie/appearanceDetector",["exports"],function(a){"use strict";var b;b=function(){function a(a,b,c){this.element=a,this.topMargin=b,this.bottomMargin=c,this.wasVisible=!1,this.detect()}return a.prototype.viewportHeight=function(){return window.innerHeight},a.prototype.viewportTop=function(){return window.scrollY},a.prototype.viewportBottom=function(){return this.viewportHeight()},a.prototype.elementTop=function(){return this.element.getBoundingClientRect().top},a.prototype.elementBottom=function(){return this.element.getBoundingClientRect().bottom},a.prototype.topVisible=function(){return this.elementTop()+this.topMargin>0&&this.elementTop()+this.topMargin<this.viewportBottom()},a.prototype.bottomVisible=function(){return this.elementBottom()-this.bottomMargin>0&&this.elementBottom()-this.bottomMargin<this.viewportBottom()},a.prototype.visible=function(){return this.topVisible()&&this.bottomVisible()},a.prototype.didAppear=function(){},a.prototype.didDisappear=function(){},a.prototype.detect=function(){var a;return a=this.visible(),a?this.wasVisible||this.didAppear():this.wasVisible&&this.didDisappear(),this.wasVisible=a},a}(),a["default"]=b}),define("multiSceneMovie/beacon",["multiSceneMovie/requestBuffer","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a,b){var c;c=new d(b),c.push(a)}return a}(),b["default"]=c}),define("multiSceneMovie/eventEmitter",["exports"],function(a){"use strict";var b;b=function(){function a(b){var c;if(a.instances||(a.instances=[]),!b)throw"please set root element for event emitting";return(c=a.instances.filter(function(a){return a.element===b})[0])?c:(this.element=b,void a.instances.push(this))}return a.prototype.emit=function(a,b){var c,d;if("object"==typeof b)return"object"==typeof CustomEvent?this.element.dispatchEvent(new CustomEvent(a,{detail:b})):(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,!1,!1,b),this.element.dispatchEvent(d));try{return this.element.dispatchEvent(new Event(a))}catch(e){return c=e,d=document.createEvent("CustomEvent"),d.initEvent(a,!1,!1),this.element.dispatchEvent(d)}},a.prototype.listen=function(a,b){return this.element.addEventListener(a,b,!1)},a}(),a["default"]=b}),define("multiSceneMovie/frameRectangle",["exports"],function(a){"use strict";var b;b=function(){function a(a,b){this.leftPosition=a,this.topPosition=b}return a.prototype.backgroundPositionText=function(){return""+this.leftPosition+"px "+this.topPosition+"px"},a}(),a["default"]=b}),define("multiSceneMovie/masterCompanionMovie",["multiSceneMovie/multiSceneMovie","multiSceneMovie/eventEmitter","exports"],function(a,b,c){"use strict";var d,e=a["default"],f=b["default"];d=function(){function a(a,b,c,d){null==c&&(c=0),null==d&&(d=0),this.masterMovie=new e(a,c,d),this.companionMovie=new e(b,c,d),this.composeMovies(),this.masterMovie.bindEvent("movie:started",function(a){return function(){return a.triggerEvent("movie:started")}}(this)),this.masterMovie.bindEvent("movie:finished",function(a){return function(){return a.triggerEvent("movie:finished")}}(this)),this.masterMovie.bindEvent("movie:played:firstQuartile",function(a){return function(){return a.triggerEvent("movie:played:firstQuartile")}}(this)),this.masterMovie.bindEvent("movie:played:half",function(a){return function(){return a.triggerEvent("movie:played:half")}}(this)),this.masterMovie.bindEvent("movie:played:thirdQuartile",function(a){return function(){return a.triggerEvent("movie:played:thirdQuartile")}}(this)),this.companionMovie.bindEvent("movie:finished",function(a){return function(){return a.triggerEvent("movie:finished")}}(this)),this.companionMovie.bindEvent("movie:played:firstQuartile",function(a){return function(){return a.triggerEvent("movie:played:firstQuartile")}}(this)),this.companionMovie.bindEvent("movie:played:half",function(a){return function(){return a.triggerEvent("movie:played:half")}}(this)),this.companionMovie.bindEvent("movie:played:thirdQuartile",function(a){return function(){return a.triggerEvent("movie:played:thirdQuartile")}}(this))}var b;return a.prototype.bindEvent=function(a,c){return b().listen(a,c)},a.prototype.triggerEvent=function(a){return b().emit(a)},a.prototype.composeMovies=function(){return this.masterMovie.bindEvent("movie:loaded",function(a){return function(){return a.companionMovie.startScenes()}}(this)),this.masterMovie.bindEvent("movie:paused",function(a){return function(b){return a.companionMovie.playMovieAtIndex(b.detail.index),a.companionMovie.triggerEvent("movie:play")}}(this))},b=function(){return new f(document.getElementsByTagName("body")[0])},a.prototype.start=function(){return this.masterMovie.startScenes()},a}(),c["default"]=d}),define("multiSceneMovie/movie",["multiSceneMovie/screen","multiSceneMovie/strip","exports"],function(a,b,c){"use strict";var d,e=a["default"],f=b["default"],g=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a,b,c){this.screen=a,this.strips=b,this.fps=c,this.loadMovie=g(this.loadMovie,this),this.screen.setStrips(this.strips),this._loaded=0,this.currentFrameIndex=0,this.currentTimeCodeInSeconds=0,this.currentTimeCodeInSecondsWas=0,this.framesCount=this.strips.reduce(function(a,b){return a+b.framesCount},0),this.strips.forEach(function(a){return function(b){return b.stripImageDidLoad=function(){return a._loaded+=1,a._loaded===Math.ceil(a.strips.length/3)?a.movieDidLoad():void 0}}}(this))}return a.prototype.loadMovie=function(){return this.strips.forEach(function(a){return a.loadStripImage()})},a.prototype.moveFrameIndex=function(){return this.currentFrameIndex++,this.currentTimeCodeInSecondsWas=this.currentTimeCodeInSeconds,this.currentTimeCodeInSeconds=Math.floor(this.currentFrameIndex/this.fps),this.currentFrameIndex===Math.floor(this.framesCount/4)&&this.firstQuartile(),this.currentFrameIndex===Math.floor(this.framesCount/2)&&this.half(),this.currentFrameIndex===Math.floor(this.framesCount/4*3)&&this.thirdQuartile(),this.currentTimeCodeInSecondsWas!==this.currentTimeCodeInSeconds?this.movieDidPlayedTo(this.currentTimeCodeInSeconds):void 0},a.prototype.play=function(){return this.timerId?void 0:(this.isAtFirstFrame()?this.movieDidStart():this.movieDidResume(),this.timerId=setInterval(function(a){return function(){return a.isAtLastFrame()&&(a.pause(),a.screen.currentStrip().deactivate(),a.screen.currentStripIndex=0,a.screen.currentStrip().activate(),a.movieDidFinish()),a.screen.showCurrentFrame(),a.screen.moveFrameToNext(),a.moveFrameIndex()}}(this),1e3/this.fps))},a.prototype.pause=function(){return this.isAtLastFrame()||this.movieDidPause(),this.timerId&&clearInterval(this.timerId),this.timerId=void 0},a.prototype.rewind=function(){return this.screen.moveFrameToFirst(),this.currentFrameIndex=0,this.currentTimeCodeInSeconds=0,this.currentTimeCodeInSecondsWas=0},a.prototype.moveToFrameIndex=function(a){var b,c;for(this.pause(),this.screen.currentStrip().resetFrame(),this.screen.currentStrip().deactivate(),b=a,c=0;b>this.strips[c].framesCount;)b-=this.strips[c].framesCount,c++;return this.screen.currentStripIndex=c,this.screen.currentStrip().resetFrame(),this.screen.currentStrip().frameIndex=b,this.screen.currentStrip().activate(),this.screen.showCurrentFrame(),this.currentFrameIndex=a},a.prototype.isAtFirstFrame=function(){return this.screen.isAtFirstFrame()},a.prototype.isAtLastFrame=function(){return this.screen.isAtLastFrame()},a.prototype.movieDidLoad=function(){},a.prototype.movieDidStart=function(){},a.prototype.movieDidResume=function(){},a.prototype.movieDidPause=function(){},a.prototype.movieDidFinish=function(){},a.prototype.movieDidPlayedTo=function(){},a.prototype.firstQuartile=function(){},a.prototype.half=function(){},a.prototype.thirdQuartile=function(){},a.createFromHTMLElement=function(b,c){var d,g,h,i,j,k,l,m,n;for(h=b.dataset,l=parseInt(h.frameWidth,10),d=parseInt(h.frameHeight,10),i=new e(b),b.style.width=""+l+"px",b.style.height=""+d+"px",k=[],m=0,n=c.length;n>m;m++)j=c[m],k.push(new f(j.dataset.url,l,d,parseInt(j.dataset.framesCount,10),j));return g=new a(i,k,parseInt(h.fps,10)),g.frameWidth=l,g.frameHeight=d,g},a}(),c["default"]=d}),define("multiSceneMovie/multiSceneMovie",["multiSceneMovie/movie","multiSceneMovie/stage","multiSceneMovie/scene","multiSceneMovie/eventEmitter","multiSceneMovie/beacon","multiSceneMovie/vastRequest","exports"],function(a,b,c,d,e,f,g){"use strict";var h,i=a["default"],j=b["default"],k=c["default"],l=d["default"],m=e["default"],n=f["default"];h=function(){function a(a,b,c){this.rootElement=a,this.appearanceDetectorMarginTop=null!=b?b:0,this.appearanceDetectorMarginBottom=null!=c?c:0,this.createAndComposeScenes()}var b,c;return a.prototype.startScenes=function(){return this.scenes[0].start(),this.triggerEvent("movie:play")},a.prototype.bindEvent=function(a,b){return this.getEventEmitter().listen(a,b)},a.prototype.triggerEvent=function(a){return this.getEventEmitter().emit(a)},a.prototype.getEventEmitter=function(){return new l(this.rootElement)},a.prototype.playMovieAtIndex=function(a){return this.movie?(this.movie.moveToFrameIndex(a),this.triggerEvent("movie:play")):void 0},b=function(a,b,c,d,e,f){var g,h,i,j,k;return h=new l(a),g=function(b){var c,d,e,f,g,h,i,j,k;if(c=function(a,b){var c;if(a){switch(c=void 0,b.event){case"creative_view":c="movie:screen:appeared";break;case"creativeView":c="movie:screen:appeared";break;case"start":c="movie:started";break;case"first_quartile":c="movie:played:firstQuartile";break;case"firstQuartile":c="movie:played:firstQuartile";break;case"mid_point":c="movie:played:half";break;case"midPoint":c="movie:played:half";break;case"midpoint":c="movie:played:half";break;case"third_quartile":c="movie:played:thirdQuartile";break;case"thirdQuartile":c="movie:played:thirdQuartile";break;case"complete":c="movie:finished";break;case"clickThrough":c="movie:clickThrough"}return c?a.listen(c,function(){return new m(b.url,b.type)}):void 0}},e=null!=(h=a.getElementsByClassName("tracking_events")[0])&&null!=(i=h.dataset)?i.vastUrl:void 0,new n(e,b,c),!e){for(j=a.getElementsByClassName("tracking"),k=[],f=0,g=j.length;g>f;f++)d=j[f],k.push(c(d.dataset.event,d.dataset.url,d.dataset.type));return k}},g(h),i=c.stage,i.movie=b,b.movieDidLoad=function(){return h.emit("movie:loaded")},b.movieDidStart=function(){return h.emit("movie:started")},b.movieDidPause=function(){return h.emit("movie:paused",{index:b.currentFrameIndex})},b.movieDidResume=function(){return h.emit("movie:resumed")},b.movieDidFinish=function(){return h.emit("movie:finished")},b.movieDidPlayedTo=function(a){return h.emit("movie:played:"+a)},b.firstQuartile=function(){return h.emit("movie:played:firstQuartile")},b.half=function(){return h.emit("movie:played:half")},b.thirdQuartile=function(){return h.emit("movie:played:thirdQuartile")},i.appearanceDetector.didAppear=function(){return h.emit("movie:screen:appeared")},i.appearanceDetector.didDisappear=function(){return h.emit("movie:screen:disappeared")},h.listen("movie:loaded",d.finish),h.listen("movie:finished",function(){return b.rewind(),b.pause()}),h.listen("movie:finished",c.finish),h.listen("movie:finished",e.start),h.listen("movie:screen:appeared",function(){return i.isVisible()?b.play():void 0}),h.listen("movie:screen:disappeared",function(){return b.pause()}),h.listen("movie:play",function(){return i.isVisible()?b.play():void 0}),h.listen("movie:pause",function(){return b.pause()}),h.listen("movie:resume",function(){return i.isVisible()?b.play():void 0}),h.listen("movie:rewind",function(){return i.isVisible()?b.rewind():void 0}),d.sceneDidStart=b.loadMovie,d.sceneDidFinish=c.start,c.sceneDidStart=function(){var a;return b.rewind(),("function"==typeof(a=i.detectAppearance()).bind?a.bind(i):void 0)?b.play():void 0},c.sceneDidFinish=f.start,document.addEventListener("scroll","function"==typeof(j=i.detectAppearance).bind?j.bind(i):void 0,!1),e.stage.element.addEventListener("click",function(){return h.emit("movie:replay")},!1),h.listen("movie:replay",function(){return f.stage.close(),e.finish(),c.start(),h.emit("movie:replayed")}),null!=(k=f.stage.element.querySelector("a"))?k.addEventListener("click",function(){return h.emit("movie:clickThrough")},!1):void 0},a.prototype.createAndComposeScenes=function(){var a,d,e,f,g,h,m,n,o,p,q,r,s,t,u,v,w;return this.rootElement=c(this.rootElement),this.rootElement&&(new l(this.rootElement),t=this.rootElement.dataset,t&&(p=this.rootElement.getElementsByClassName(t.loadingStage)[0],n=this.rootElement.getElementsByClassName(t.finishedStage)[0],a=this.rootElement.getElementsByClassName(t.contentStage)[0],m=this.rootElement.getElementsByClassName(t.movieStage)[0].dataset,s=this.rootElement.getElementsByClassName(m.screen)[0],u=this.rootElement.getElementsByClassName(m.stripsContainer)[0],v=u.getElementsByClassName(m.strips),s))?(h=i.createFromHTMLElement(s,v),this.movie=h,g=""+h.frameHeight+"px",w=""+h.frameWidth+"px",u.style.height=g,u.style.width=w,d=a.getElementsByTagName("img")[0],d.style.height=g,d.style.width=w,f=function(a){return function(b){return new k(new j(b,a.appearanceDetectorMarginTop,a.appearanceDetectorMarginBottom))}}(this),r=f(s),q=f(p),o=f(n),e=f(a),b(this.rootElement,h,r,q,o,e),this.scenes=[q,r,o,e]):void 0},c=function(a){var b;return a?(b=void 0,b="string"==typeof a?document.getElementById(a):a.selector?a[0]:a):void 0},a}(),g["default"]=h}),define("multiSceneMovie/requestBuffer",["exports"],function(a){"use strict";var b;b=function(){function a(a){this.type=null!=a?a:"img",this.queue=[],this.xhr=null}return a.prototype.push=function(a){return this.queue.push(a),1===this.queue.length?this.run():void 0},a.prototype.run=function(){var a;return a=function(a){return function(){return a.queue.length>0?a.run():void 0}}(this),this.requestHandler(a)},a.prototype.requestHandler=function(a){var b,c,d;switch(this.type){case"img":return d=this.queue[0],b=document.createElement("img"),b.width=0,b.height=0,b.style.display="none",b.src=d,document.getElementsByTagName("body")[0].appendChild(b),b.addEventListener("load",function(c){return function(){return c.queue.shift(),a(),b.removeEventListener("load",arguments,!1)}}(this),!1);case"xhr":this.xhr||(this.xhr=window.XDomainRequest?new XDomainRequest:new XMLHttpRequest),this.xhr.addEventListener("load",function(b){return function(){return b.queue.shift(),a(),b.xhr.removeEventListener("load",arguments,!1)}}(this),!1);try{return d=this.queue[0],this.xhr.open("GET",d),this.xhr.send(null)}catch(e){c=e}}},a}(),a["default"]=b}),define("multiSceneMovie/scene",["exports"],function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function a(a){this.stage=a,this.finish=c(this.finish,this),this.start=c(this.start,this)}return a.prototype.sceneDidStart=function(){},a.prototype.sceneDidFinish=function(){},a.prototype.start=function(){return this.stage.open(),this.sceneDidStart()},a.prototype.finish=function(){return this.stage.close(),this.sceneDidFinish()},a}(),a["default"]=b}),define("multiSceneMovie/screen",["exports"],function(a){"use strict";var b;b=function(){function a(a){this.element=a,this.element.style.position="relative",this.element.style.overflow="hidden",this.setDefaultImage()}return a.prototype.setStrips=function(a){return this.strips=a,this.currentStripIndex=0,this.currentStrip().activate()},a.prototype.setDefaultImage=function(){var a;return this.defaultImageUrl()?(a=this.element.style.cssText,this.element.style.cssText=a+("background-image: url("+this.defaultImageUrl()+"); background-size: cover;ã€€background-repeat: no-repeat;")):void 0},a.prototype.defaultImageUrl=function(){var a;return a=this.element.dataset.defaultImage,""===a?void 0:a},a.prototype.showCurrentFrame=function(){return this.currentStrip().moveToCurrentFrame()},a.prototype.currentStrip=function(){return this.strips[this.currentStripIndex]},a.prototype.moveFrameToNext=function(){return this.currentStrip().isAtLastFrame()&&this.moveStripToNext(),this.currentStrip().moveFrameToNext()},a.prototype.moveStripToNext=function(){return this.currentStrip().resetFrame(),this.currentStrip().deactivate(),this.currentStrip()!==this.strips[this.strips.length-1]&&this.currentStripIndex++,this.currentStrip().resetFrame(),this.currentStrip().activate()},a.prototype.moveFrameToFirst=function(){return this.currentStrip().deactivate(),this.currentStripIndex=0,this.currentStrip().frameIndex=0,this.currentStrip().activate(),this.currentStrip().moveToCurrentFrame()},a.prototype.isAtFirstFrame=function(){return this.currentStrip()!==this.strips[0]?!1:0===this.currentStrip().frameIndex?!0:!1},a.prototype.isAtLastFrame=function(){return this.currentStrip()!==this.strips[this.strips.length-1]?!1:this.currentStrip().isAtLastFrame()?!0:!1},a}(),a["default"]=b}),define("multiSceneMovie/stage",["multiSceneMovie/appearanceDetector","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a,b,c){this.element=a,this.appearanceDetectorMarginTop=b,this.appearanceDetectorMarginBottom=c,this.appearanceDetector=new d(this.element,this.appearanceDetectorMarginTop,this.appearanceDetectorMarginBottom)}return a.prototype.stageDidAppear=function(){},a.prototype.stageDidDisapper=function(){},a.prototype.detectAppearance=function(){return this.appearanceDetector.detect()},a.prototype.open=function(){return this.detectAppearance(),this.element.classList.remove("hide")},a.prototype.close=function(){return this.element.classList.add("hide")},a.prototype.isOpen=function(){return!this.isClose()},a.prototype.isClose=function(){return this.element.classList.contains("hide")},a.prototype.isVisible=function(){return this.isOpen()&&this.appearanceDetector.visible()},a}(),b["default"]=c}),define("multiSceneMovie/strip",["multiSceneMovie/frameRectangle","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a,b,c,d,e){this.image_uri=a,this.frameWidth=b,this.frameHeight=c,this.framesCount=d,this.element=e,this.initializeStyles(),this.initializeFrames(),this.initializeStripImages()}return a.prototype.initializeStyles=function(){return this.element.style.position="absolute"},a.prototype.initializeFrames=function(){var a,b,c;for(this.frames=[],a=b=0,c=this.framesCount-1;c>=0?c>=b:b>=c;a=c>=0?++b:--b)this.frames.push(new d(0,this.frameHeight*a));return this.frameIndex=0},a.prototype.initializeStripImages=function(){return this.stripImageElement=this.element.getElementsByTagName("img")[0],this.stripImageElement.style.width=""+this.frameWidth+"px",this.stripImageElement.style.height=""+this.frameHeight*this.framesCount+"px"},a.prototype.currentFrame=function(){return this.frames[this.frameIndex]},a.prototype.moveFrameToNext=function(){return this.frameIndex++},a.prototype.isAtLastFrame=function(){return this.frameIndex===this.framesCount-1},a.prototype.stripImageDidLoad=function(){},a.prototype.loadStripImage=function(){return this.stripImageElement.addEventListener("load",this.stripImageDidLoad,!1),this.stripImageElement.src=this.image_uri},a.prototype.activate=function(){return this.element.classList.remove("hide")},a.prototype.deactivate=function(){return this.element.classList.add("hide")},a.prototype.moveToCurrentFrame=function(){return this.currentFrame()||this.initializeFrames(),this.element.style.top=""+-1*this.currentFrame().topPosition+"px",this.element.style.left=""+-1*this.currentFrame().leftPosition+"px"},a.prototype.resetFrame=function(){return this.frameIndex=0,this.moveToCurrentFrame()},a}(),b["default"]=c}),define("multiSceneMovie/vastRequest",["exports"],function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function a(a,b,d){this.url=a,this.eventEmitter=b,this.callback=d,this.setTrackers=c(this.setTrackers,this),this.clickThrough=void 0,this.url&&this.run()}return a.prototype.valid=function(){return this.url?!0:!1},a.prototype.run=function(){return this.requestHandler(this.setTrackers)},a.prototype.setTrackers=function(a){var b,c,d,e,f;if(a){for(c=[],Array.prototype.forEach.call(a.querySelectorAll("Linear VideoClicks ClickThrough"),function(a){return c.push({event:"clickThrough",url:a.textContent,type:"img"})}),Array.prototype.forEach.call(a.querySelectorAll("Linear TrackingEvents Tracking"),function(a){return c.push({event:a.getAttribute("event"),url:a.textContent,type:"img"})}),Array.prototype.forEach.call(a.querySelectorAll("Impression"),function(a){return c.push({event:"start",url:a.textContent,type:"img"})}),f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(this.callback(this.eventEmitter,b));return f}},a.prototype.requestHandler=function(a){var b;this.xhr||(this.xhr=new XMLHttpRequest),this.xhr.addEventListener("load",function(b){return function(){return a(b.xhr.responseXML),b.xhr.removeEventListener("load",arguments,!1)}}(this),!1);try{return this.xhr.open("GET",this.url),this.xhr.send(null)}catch(c){b=c}},a}(),a["default"]=b});