define("multiSceneMovie/app",["multiSceneMovie/movie","multiSceneMovie/stage","multiSceneMovie/movieStage","multiSceneMovie/scene","exports"],function(a,b,c,d,e){"use strict";var f,g,h,i,j=a["default"],k=b["default"],l=c["default"],m=d["default"];h=function(a){return new m(new l(a))},i=function(a){return new m(new k(a))},f=function(a,b,c,d,e){return c.sceneDidStart=a.loadMovie,c.sceneDidFinish=b.start,a.movieDidLoad=function(){return c.finish()},a.movieDidFinish=function(){return b.finish(),d.start()},b.sceneDidStart=function(){return a.rewind(),this.stage.detectAppearance()?a.play():void 0},b.sceneDidFinish=e.start,document.addEventListener("scroll",b.stage.detectAppearance,!1),d.stage.element.addEventListener("click",function(){return d.finish(),b.start()},!1),[c,b,d,e]},g=function(a){var b,c,d,e,g,k,l,m,n,o,p,q;if(document.getElementById(a))return p=document.getElementById("stages_container").dataset,l=document.getElementById(p.loadingStage),g=document.getElementById(p.finishedStage),b=document.getElementById(p.contentStage),e=document.getElementById(document.getElementById("stages_container").dataset.movieStage).dataset,o=document.getElementById(e.screen),q=document.getElementById(e.strips).getElementsByClassName(e.stripsClass),d=j.createFromHTMLElement(o,q),n=h(d),m=i(l),k=i(g),c=i(b),f(d,n,m,k,c),[m,n,k,c]},e["default"]=g}),define("multiSceneMovie/appearanceDetector",["exports"],function(a){"use strict";var b;b=function(){function a(a){this.element=a,this.wasVisible=!1,this.detect()}return a.prototype.viewportHeight=function(){return window.innerHeight},a.prototype.viewportTop=function(){return window.scrollY},a.prototype.viewportBottom=function(){return this.viewportTop()+this.viewportHeight()},a.prototype.elementTop=function(){return this.element.offsetTop},a.prototype.elementBottom=function(){return this.elementTop()+this.element.offsetHeight},a.prototype.topVisible=function(){return this.elementTop()>this.viewportTop()&&this.elementTop()<this.viewportBottom()},a.prototype.bottomVisible=function(){return this.elementBottom()>this.viewportTop()&&this.elementBottom()<this.viewportBottom()},a.prototype.visible=function(){return this.topVisible()&&this.bottomVisible()},a.prototype.didAppear=function(){},a.prototype.didDisappear=function(){},a.prototype.detect=function(){var a;return a=this.visible(),a?this.wasVisible||this.didAppear():this.wasVisible&&this.didDisappear(),this.wasVisible=a},a}(),a["default"]=b}),define("multiSceneMovie/frameRectangle",["exports"],function(a){"use strict";var b;b=function(){function a(a,b){this.leftPosition=a,this.topPosition=b}return a.prototype.toCssText=function(){return"background-position: "+this.leftPosition+"px "+this.topPosition+"px;"},a}(),a["default"]=b}),define("multiSceneMovie/movie",["multiSceneMovie/screen","multiSceneMovie/strip","exports"],function(a,b,c){"use strict";var d,e=a["default"],f=b["default"],g=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(a,b,c){this.screen=a,this.strips=b,this.fps=c,this.loadMovie=g(this.loadMovie,this),this.screen.strips=this.strips,this._loaded=0}return a.prototype.loadMovie=function(){var a,b,c,d,e,f;for(e=this.strips,f=[],c=0,d=e.length;d>c;c++)b=e[c],a=new Image,a.onload=function(a){return function(){return a._loaded+=1,a._loaded===a.strips.length?a.movieDidLoad():void 0}}(this),f.push(a.src=b.image_uri);return f},a.prototype.movieDidLoad=function(){},a.prototype.play=function(){return this.timerId?void 0:this.timerId=setInterval(function(a){return function(){return a.screen.currentStrip().isLastFrame()&&(a.pause(),a.movieDidFinish()),a.screen.showCurrentFrame(),a.screen.currentStrip().moveFrameToNext()}}(this),1e3/this.fps)},a.prototype.pause=function(){return this.timerId&&clearInterval(this.timerId),this.timerId=void 0},a.prototype.rewind=function(){return this.screen.currentStrip().frameIndex=0},a.prototype.movieDidFinish=function(){},a.createFromHTMLElement=function(b,c){var d,g,h,i,j,k;for(d=b.dataset,g=new e(b),i=[],j=0,k=c.length;k>j;j++)h=c[j],i.push(new f(h.dataset.url,parseInt(d.frameWidth,10),parseInt(d.frameHeight,10),parseInt(d.framesCount,10)));return new a(g,i,parseInt(d.fps,10))},a}(),c["default"]=d}),define("multiSceneMovie/movieStage",["multiSceneMovie/stage","multiSceneMovie/appearanceDetector","exports"],function(a,b,c){"use strict";var d,e=a["default"],f=b["default"],g=function(a,b){return function(){return a.apply(b,arguments)}},h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(a){function b(a){this.movie=a,this.detectAppearance=g(this.detectAppearance,this),this.stageDidDisappear=g(this.stageDidDisappear,this),this.stageDidAppear=g(this.stageDidAppear,this),this.element=this.movie.screen.element,this.ad=new f(this.element),this.ad.didAppear=this.stageDidAppear,this.ad.didDisappear=this.stageDidDisappear,this.detectAppearance()&&this.movie.play()}return i(b,a),b.prototype.stageDidAppear=function(){return this.movie.play()},b.prototype.stageDidDisappear=function(){return this.movie.pause()},b.prototype.detectAppearance=function(){return this.ad.detect()},b}(e),c["default"]=d}),define("multiSceneMovie/scene",["exports"],function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function a(a){this.stage=a,this.finish=c(this.finish,this),this.start=c(this.start,this)}return a.prototype.sceneDidStart=function(){},a.prototype.sceneDidFinish=function(){},a.prototype.start=function(){return this.stage.open(),this.sceneDidStart()},a.prototype.finish=function(){return this.stage.close(),this.sceneDidFinish()},a}(),a["default"]=b}),define("multiSceneMovie/screen",["exports"],function(a){"use strict";var b;b=function(){function a(a){this.element=a,this.setDefaultImage()}return a.prototype.setStrips=function(a){this.strips=a},a.prototype.setDefaultImage=function(){var a;return this.defaultImageUrl()?(a=this.element.style.cssText,this.element.style.cssText=a+("background-image: url("+this.defaultImageUrl()+"); background-size: cover;　background-repeat: no-repeat;")):void 0},a.prototype.defaultImageUrl=function(){var a;return a=this.element.dataset.defaultImage,""===a?void 0:a},a.prototype.showCurrentFrame=function(){var a;return a=this.element.style.cssText,this.element.style.cssText=a+this.currentStrip().toCssText()},a.prototype.currentStrip=function(){return this.strips[0]},a}(),a["default"]=b}),define("multiSceneMovie/stage",["exports"],function(a){"use strict";var b;b=function(){function a(a){this.element=a}return a.prototype.stageDidAppear=function(){},a.prototype.stageDidDisapper=function(){},a.prototype.open=function(){return this.element.classList.remove("hide")},a.prototype.close=function(){return this.element.classList.add("hide")},a}(),a["default"]=b}),define("multiSceneMovie/strip",["multiSceneMovie/frameRectangle","exports"],function(a,b){"use strict";var c,d=a["default"];c=function(){function a(a,b,c,e){var f,g,h;for(this.image_uri=a,this.frameWidth=b,this.frameHeight=c,this.framesCount=e,this.frames=[],f=g=0,h=this.framesCount-1;h>=0?h>=g:g>=h;f=h>=0?++g:--g)this.frames.push(new d(0,this.frameHeight*(this.framesCount-f)));this.frameIndex=0}return a.prototype.currentFrame=function(){return this.frames[this.frameIndex]},a.prototype.moveFrameToNext=function(){return this.isLastFrame()?this.frameIndex=0:this.frameIndex++},a.prototype.isLastFrame=function(){return this.frameIndex===this.framesCount-1},a.prototype.toCssText=function(){var a;return a="background-image: url("+this.image_uri+"); background-size: cover;　background-repeat: no-repeat;",a+this.currentFrame().toCssText()},a}(),b["default"]=c});